<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creative Editor</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* ðŸ”’ SAME CSS AS YOUR ORIGINAL â€” UNCHANGED */
:root {
  --accent:#007aff;--sidebar-bg:#0d1117;--canvas-bg:#f0f2f5;--border:#30363d;
  --text-muted:#8b949e;--safe-green:#238636;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Plus Jakarta Sans',sans-serif;}
body{background:#010409;color:white;height:100vh;display:flex;flex-direction:column;overflow:hidden;}
.header{height:60px;background:var(--sidebar-bg);border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;padding:0 20px;}
.workspace{display:flex;flex:1;overflow:hidden;}
.sidebar-left,.sidebar-right{width:280px;background:var(--sidebar-bg);border:1px solid var(--border);padding:15px;overflow-y:auto;}
.viewport{flex:1;background:var(--canvas-bg);display:flex;justify-content:center;padding:30px;overflow-y:auto;}
.artboard{width:100%;max-width:900px;background:white;min-height:1200px;color:#1f2937;}
.mobile-mode{max-width:375px!important;margin:auto;}
.btn{padding:8px 16px;border-radius:6px;border:none;cursor:pointer;font-size:13px;font-weight:600;}
.btn-blue{background:var(--accent);color:white;}
</style>
</head>
<body>

<header class="header">
  <strong>Creative Editor</strong>
  <button class="btn btn-blue" onclick="exportHTML()">Export Website</button>
</header>

<div class="workspace">
  <aside class="sidebar-left">
    <p style="font-size:12px;color:#8b949e">Template Loaded</p>
    <div id="projectInfo" style="margin-top:10px;font-size:14px;"></div>
  </aside>

  <main class="viewport">
    <div class="artboard" id="artboard">
      Loading template...
    </div>
  </main>

  <aside class="sidebar-right">
    <p style="font-size:12px;color:#8b949e">Inspector</p>
    <button class="btn" onclick="toggleView('desktop')">Desktop</button>
    <button class="btn" onclick="toggleView('mobile')">Mobile</button>
  </aside>
</div>

<script>
/* âœ… STEP 1: URL PARAMS READ */
const params = new URLSearchParams(window.location.search);
const template = params.get("template") || "business";
const siteName = params.get("name") || "My Website";

document.getElementById("projectInfo").innerHTML =
  `<strong>${siteName}</strong><br><small>Template: ${template}</small>`;

/* âœ… STEP 2: TEMPLATE LOAD */
async function loadTemplate() {
  try {
    const res = await fetch(`templates/${template}.html`);
    let html = await res.text();

    html = html.replaceAll("{{SITE_NAME}}", siteName);
    html = html.replaceAll("{{TAGLINE}}", "Powered by Creative");
    html = html.replaceAll("{{ABOUT}}", "Edit this content inside the editor.");
    html = html.replaceAll("{{CONTACT}}", "contact@example.com");

    document.getElementById("artboard").innerHTML = html;
  } catch (e) {
    document.getElementById("artboard").innerHTML =
      "<p style='padding:40px'>Template not found.</p>";
  }
}
loadTemplate();

/* âœ… VIEW TOGGLE */
function toggleView(mode){
  document.getElementById("artboard").className =
    (mode === "mobile") ? "artboard mobile-mode" : "artboard";
}

/* âœ… FINAL EXPORT */
function exportHTML(){
  const content = document.getElementById("artboard").innerHTML;
  const finalHTML = `
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>${siteName}</title>
</head>
<body>
${content}
</body>
</html>`;
  const blob = new Blob([finalHTML], {type:"text/html"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = siteName.replace(/\s+/g,'_') + ".html";
  a.click();
}
</script>

</body>
</html>
